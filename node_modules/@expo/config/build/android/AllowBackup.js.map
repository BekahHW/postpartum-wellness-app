{"version":3,"file":"AllowBackup.js","sourceRoot":"","sources":["../../src/android/AllowBackup.ts"],"names":[],"mappings":";;AAGA,SAAgB,cAAc,CAAC,MAAmC;;IAChE,oBAAoB;IACpB,+DAA+D;IAC/D,mBAAO,MAAM,CAAC,OAAO,0CAAE,WAAW,mCAAI,IAAI,CAAC;AAC7C,CAAC;AAJD,wCAIC;AAEM,KAAK,UAAU,cAAc,CAClC,MAAmC,EACnC,gBAA0B;IAE1B,MAAM,WAAW,GAAG,cAAc,CAAC,MAAM,CAAC,CAAC;IAE3C,IAAI,KAAK,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;QACxD,KAAK,MAAM,WAAW,IAAI,gBAAgB,CAAC,QAAQ,CAAC,WAAW,EAAE;YAC/D,IAAI,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAG,GAAG,GAAG;gBACtB,WAAW,CAAC,GAAG,CAAC,CAAC,qBAAqB,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC;aAC1E;SACF;KACF;IAED,OAAO,gBAAgB,CAAC;AAC1B,CAAC;AAfD,wCAeC;AAED,SAAgB,0BAA0B,CAAC,gBAA0B;IACnE,IAAI,KAAK,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;QACxD,KAAK,MAAM,WAAW,IAAI,gBAAgB,CAAC,QAAQ,CAAC,WAAW,EAAE;YAC/D,IAAI,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAG,GAAG,GAAG;gBACtB,OAAO,WAAW,CAAC,GAAG,CAAC,CAAC,qBAAqB,CAAC,KAAK,MAAM,CAAC;aAC3D;SACF;KACF;IAED,OAAO,IAAI,CAAC;AACd,CAAC;AAVD,gEAUC","sourcesContent":["import { ExpoConfig } from '../Config.types';\nimport { Document } from './Manifest';\n\nexport function getAllowBackup(config: Pick<ExpoConfig, 'android'>): boolean {\n  // Defaults to true.\n  // https://docs.expo.io/versions/latest/config/app/#allowbackup\n  return config.android?.allowBackup ?? true;\n}\n\nexport async function setAllowBackup(\n  config: Pick<ExpoConfig, 'android'>,\n  manifestDocument: Document\n) {\n  const allowBackup = getAllowBackup(config);\n\n  if (Array.isArray(manifestDocument.manifest.application)) {\n    for (const application of manifestDocument.manifest.application) {\n      if (application?.['$']) {\n        application['$']['android:allowBackup'] = allowBackup ? 'true' : 'false';\n      }\n    }\n  }\n\n  return manifestDocument;\n}\n\nexport function getAllowBackupFromManifest(manifestDocument: Document): boolean | null {\n  if (Array.isArray(manifestDocument.manifest.application)) {\n    for (const application of manifestDocument.manifest.application) {\n      if (application?.['$']) {\n        return application['$']['android:allowBackup'] === 'true';\n      }\n    }\n  }\n\n  return null;\n}\n"]}