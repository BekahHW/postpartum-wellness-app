"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function getAllowBackup(config) {
    var _a, _b;
    // Defaults to true.
    // https://docs.expo.io/versions/latest/config/app/#allowbackup
    return (_b = (_a = config.android) === null || _a === void 0 ? void 0 : _a.allowBackup) !== null && _b !== void 0 ? _b : true;
}
exports.getAllowBackup = getAllowBackup;
async function setAllowBackup(config, manifestDocument) {
    const allowBackup = getAllowBackup(config);
    if (Array.isArray(manifestDocument.manifest.application)) {
        for (const application of manifestDocument.manifest.application) {
            if (application === null || application === void 0 ? void 0 : application['$']) {
                application['$']['android:allowBackup'] = allowBackup ? 'true' : 'false';
            }
        }
    }
    return manifestDocument;
}
exports.setAllowBackup = setAllowBackup;
function getAllowBackupFromManifest(manifestDocument) {
    if (Array.isArray(manifestDocument.manifest.application)) {
        for (const application of manifestDocument.manifest.application) {
            if (application === null || application === void 0 ? void 0 : application['$']) {
                return application['$']['android:allowBackup'] === 'true';
            }
        }
    }
    return null;
}
exports.getAllowBackupFromManifest = getAllowBackupFromManifest;
//# sourceMappingURL=AllowBackup.js.map